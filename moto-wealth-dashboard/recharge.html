<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Recharge</title>

    <link href="assets/img/favicon.png" rel="icon" />

    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet" />

    <link href="assets/css/style.css" rel="stylesheet" />
    <style>
      .recharge-box {
        background: linear-gradient(
          90deg,
          rgba(0, 173, 238, 0.8),
          rgba(0, 130, 200, 0.6)
        );
        border-radius: 8px;
        padding: 20px;
        color: white;
        box-shadow: 0 0 15px rgba(0, 173, 238, 0.3);
      }

      .recharge-box .form-select,
      .recharge-box .form-control {
        background-color: #2a3f5f;
        color: white;
        border: 1px solid #00adee;
        padding-right: 30px;
        /* Space for custom arrow */
      }

      .recharge-box .form-select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path fill="%2300adee" d="M2 4l4 4 4-4z"/></svg>');
        background-repeat: no-repeat;
        background-position: right 10px center;
      }

      .recharge-box .form-select:focus,
      .recharge-box .form-control:focus {
        border-color: #00adee;
        box-shadow: 0 0 5px rgba(0, 173, 238, 0.5);
      }

      .recharge-box .form-control::placeholder {
        color: white;
        opacity: 0.7;
      }

      .nav-tabs {
        border-bottom: 2px solid #00adee;
        display: flex;
      }

      .nav-tabs .nav-item {
        flex: 1;
      }

      .nav-tabs .nav-link {
        color: white;
        background-color: #1a2e4a;
        border: 1px solid #00adee;
        border-bottom: none;
        border-radius: 5px 5px 0 0;
        padding: 10px 20px;
        transition: all 0.3s ease;
        text-align: center;
        width: 100%;
        font-weight: 600;
      }

      .nav-tabs .nav-link.active {
        color: #00adee;
        background-color: #2a3f5f;
        border-bottom: 2px solid #00adee;
        box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.3);
      }

      .nav-tabs .nav-link:hover {
        color: #00adee;
        background-color: #2a3f5f;
      }

      .btn-custom {
        background-color: #00adee;
        color: white;
        border: none;
        width: 100%;
      }

      .btn-custom:hover {
        background-color: #008bc2;
      }

      .copy_btn {
        background-color: #00adee;
        color: white;
        border: none;
        padding: 5px 10px;
        font-size: 12px;
        border-radius: 4px;
      }

      .copy_btn:hover {
        background-color: #008bc2;
      }

      .qr-placeholder {
        width: 150px;
        height: 150px;
        background-color: #ccc;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
      }

      .address-box {
        background-color: #2a3f5f;
        padding: 10px;
        border-radius: 4px;
        word-break: break-all;
        color: white;
        position: relative;
      }

      .address-box .copy_btn {
        position: absolute;
        top: 8px;
        right: 10px;
      }

      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        margin: 0;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }
    </style>
  </head>

  <body>
    <header id="header" class="header fixed-top d-flex align-items-center">
      <div class="d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo-full d-flex align-items-center">
          <img src="assets/img/logo.png" alt="logo" />
        </a>
        <i class="bi bi-list toggle-sidebar-btn"></i>
      </div>
      <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
          <li class="nav-item dropdown pe-3">
            <a
              class="nav-link nav-profile d-flex align-items-center pe-0"
              href="#"
              data-bs-toggle="dropdown"
            >
              <img
                src="assets/img/profile-img.jpg"
                alt="Profile"
                class="rounded-circle"
              />
            </a>
            <ul
              class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile"
            >
              <li class="dropdown-header">
                <h6>1234567890</h6>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <a class="dropdown-item d-flex align-items-center" href="#">
                  <i class="bi bi-person"></i>
                  <span>My Profile</span>
                </a>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>
              <li>
                <a class="dropdown-item d-flex align-items-center" href="#">
                  <i class="bi bi-box-arrow-right"></i>
                  <span>Sign Out</span>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
    </header>
    <aside id="sidebar" class="sidebar">
      <ul class="sidebar-nav" id="sidebar-nav">
        <li class="nav-item">
          <a class="nav-link collapsed" href="index.html">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link collapsed" href="support.html">
            <i class="bi bi-headset"></i>
            <span>Support</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link collapsed" href="team.html">
            <i class="bi bi-people"></i>
            <span>Team</span>
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link collapsed auto-id"
            data-bs-toggle="collapse"
            href="#"
          >
            <i class="bx bx-dollar"></i><span>Incomes</span
            ><i class="bi bi-chevron-down ms-auto"></i>
          </a>
          <ul class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a href="transactions.html">
                <i class="bi bi-circle"></i><span>Transactions</span>
              </a>
            </li>
            <li>
              <a href="withdrawal.html">
                <i class="bi bi-circle"></i><span>Withdrawal</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </aside>
    <main id="main" class="main">
      <section class="section recharge">
        <div class="page-heading">
          <h3>Recharge</h3>
        </div>
        <div class="row justify-content-center mt-4">
          <div class="col-lg-6">
            <div class="recharge-box">
              <ul class="nav nav-tabs" id="paymentTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="gateway-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#gateway"
                    type="button"
                    role="tab"
                    aria-controls="gateway"
                    aria-selected="true"
                  >
                    Gateway Payment
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="manual-tab"
                    data-bs-toggle="tab"
                    data-bs-target="#manual"
                    type="button"
                    role="tab"
                    aria-controls="manual"
                    aria-selected="false"
                  >
                    Manual Payment
                  </button>
                </li>
              </ul>
              <div class="tab-content mt-3" id="paymentTabsContent">
                <div
                  class="tab-pane fade show active"
                  id="gateway"
                  role="tabpanel"
                  aria-labelledby="gateway-tab"
                >
                  <div class="mb-3">
                    <label for="packageSelect" class="form-label"
                      >Select Package:</label
                    >
                    <select
                      class="form-select"
                      id="packageSelect"
                      onchange="toggleCustomInput()"
                    >
                      <option value="100">$100</option>
                      <option value="500">$500</option>
                      <option value="1500">$1500</option>
                      <option value="custom">Above $1500</option>
                    </select>
                  </div>
                  <div
                    class="mb-3"
                    id="customAmountInput"
                    style="display: none"
                  >
                    <label for="customAmount" class="form-label"
                      >Enter Amount:</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="customAmount"
                      placeholder="Enter amount"
                    />
                  </div>
                  <p class="text-center">Proceed with Gateway Payment</p>
                  <button type="button" class="btn btn-custom">Submit</button>
                </div>
                <div
                  class="tab-pane fade"
                  id="manual"
                  role="tabpanel"
                  aria-labelledby="manual-tab"
                >
                  <div class="mb-3">
                    <label for="packageSelectManual" class="form-label"
                      >Select Package:</label
                    >
                    <select
                      class="form-select"
                      id="packageSelectManual"
                      onchange="toggleCustomInputManual()"
                    >
                      <option value="100">$100</option>
                      <option value="500">$500</option>
                      <option value="1500">$1500</option>
                      <option value="custom">Above $1500</option>
                    </select>
                  </div>
                  <div
                    class="mb-3"
                    id="customAmountInputManual"
                    style="display: none"
                  >
                    <label for="customAmountManual" class="form-label"
                      >Enter Amount:</label
                    >
                    <input
                      type="number"
                      class="form-control"
                      id="customAmountManual"
                      placeholder="Enter amount"
                    />
                  </div>
                  <div class="qr-placeholder mb-3">QR Code Placeholder</div>
                  <div class="address-box mb-3">
                    dsehijdscdvbfg...
                    <button
                      type="button"
                      class="btn copy_btn"
                      onclick="copyAddress()"
                    >
                      Copy
                    </button>
                  </div>
                  <button type="button" class="btn btn-custom">Submit</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer id="footer" class="footer">
      <div class="copyright">
        © Copyright
        <strong><span class="text-white">ProjectName.</span></strong> All Rights
        Reserved
      </div>
    </footer>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
      function toggleCustomInput() {
        const packageSelect = document.getElementById("packageSelect");
        const customAmountInput = document.getElementById("customAmountInput");
        if (packageSelect.value === "custom") {
          customAmountInput.style.display = "block";
        } else {
          customAmountInput.style.display = "none";
        }
      }

      function toggleCustomInputManual() {
        const packageSelectManual = document.getElementById(
          "packageSelectManual"
        );
        const customAmountInputManual = document.getElementById(
          "customAmountInputManual"
        );
        if (packageSelectManual.value === "custom") {
          customAmountInputManual.style.display = "block";
        } else {
          customAmountInputManual.style.display = "none";
        }
      }

      function copyAddress() {
        const address = document
          .querySelector(".address-box")
          .textContent.trim()
          .replace("Copy", "");
        navigator.clipboard.writeText(address).then(() => {
          alert("Address copied to clipboard!");
        });
      }
    </script>
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    // Attach click event to both Submit buttons
    const gatewaySubmitBtn = document.querySelector("#gateway .btn-custom");
    const manualSubmitBtn = document.querySelector("#manual .btn-custom");

    gatewaySubmitBtn.addEventListener("click", function () {
      submitRecharge("gateway");
    });

    manualSubmitBtn.addEventListener("click", function () {
      submitRecharge("manual");
    });

    async function submitRecharge(type) {
      // Determine if it's Gateway or Manual tab
      let amount = 0;
      let selectedPackage = "";
      if (type === "gateway") {
        selectedPackage = document.getElementById("packageSelect").value;
        amount =
          selectedPackage === "custom"
            ? document.getElementById("customAmount").value
            : selectedPackage;
      } else if (type === "manual") {
        selectedPackage = document.getElementById("packageSelectManual").value;
        amount =
          selectedPackage === "custom"
            ? document.getElementById("customAmountManual").value
            : selectedPackage;
      }

      if (!amount) {
        alert("Please enter a valid amount.");
        return;
      }

      // Prepare payload
      const payload = {
        amount: amount,
        type: type,
        description: `${type} payment`, // you can customize this
        package: selectedPackage === "custom" ? "Above $1500" : `$${amount}`,
      };

      try {
        const response = await fetch("https://new-moto.onrender.com/api/v1/addMoney", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: "Bearer " + localStorage.getItem("token"), // if using auth
          },
          body: JSON.stringify(payload),
        });

        const result = await response.json();
        if (response.ok) {
          alert("Recharge successful!");
          console.log("Success:", result);
        } else {
          alert(result.message || "Failed to recharge.");
          console.error("Error:", result);
        }
      } catch (error) {
        console.error("Error:", error);
        alert("An error occurred. Please try again.");
      }
    }
  });
</script>

  </body>
</html>
